<!DOCTYPE html>
<html>
<head>

	<title>Ajax</title>

	<meta charset="utf-8">

	<script src="https://code.jquery.com/jquery-1.9.1.js"></script>
	<script src="jquerycookie.js"></script>


	<link rel="stylesheet" type="text/css" href="_estilo.css">
	
</head>
<body>

	<h1 class="text-center">Ajax</h1>

	<div class="DivClass">
		<h2>Armazenamento de informação em JS</h2>

		<p>
			Basicamente temos duas formas de armazenar dados no cliente:
		</p>

        <ul>
			<li>Através de cookies (modelo bem antigo de armazenamento de dados no cliente)</li>
			<li>API Web Storage (API disponibilizada com o surgimento do HTML5)</li>
        </ul>

		<p>
			Embora a API Web Storage tenha diversas vantagens sobre o uso de cookies, iremos abordar os dois conteúdos, 
			visto que também podemos manipular cookies em linguagens server-side e porque muitos projetos ainda utilizam esse recurso.
		</p>
	</div>

    <div class="DivClass">
		<h2>Cookies</h2>

		<p>
			São informações gravadas por uma aplicação web na máquina cliente. Para cada domínio
			da aplicação, é gerado um arquivo txt, que contém os cookies.
		</p>
		<p>Os cookies são formados por um par composto de:</p>
		<ul>
			<li>Nome do cookie</li>
			<li>Valor do cookie</li>
		</ul>

		<p>
			Os cookies são mantidos na máquina cliente enquanto seu prazo de “vida” não expirar ou
			enquanto o usuário não limpá-los através do navegador
		</p>

		<p>
			Como padrão, podemos criar cookies de até 10Kb. Isso quer dizer que podemos ter um
			cookie de 10k ou 50 cookies no máximo, que totalizam juntos 10k. Esses valores correspondem
			aos cookies de um determinado domínio. Esses valores podem variar conforme o browser.
		</p>

		<hr />

		<h3>Para que usar cookies?</h3>

		<p>Para gravar algumas informações que, posteriormente, poderemos usar em nossa aplicação web.</p>

		<p>
			Em um exemplo clássico, podemos trabalhar com os cookies em um e-commerce. Enquanto
			o usuário está fazendo a escolha dos pedidos e colocando-os no carrinho de compra, podemos
			armazenar os dados dos produtos em cookies. Após a finalização da compra, gravamos os
			dados em um banco de dados e limpamos o cookie.
		</p>

		<p>Vamos testar essa ideia usando o site do Submarino.</p>

		<p>
			Qualquer site pode gravar cookies em sua máquina, desde que essa permissão esteja
			habilitada em seu navegador.
		</p>

		<p>Um cookie não pode apagar arquivos em sua máquina e muito menos “roubar” suas senhas.</p>

		<p>
			Um site só pode acessar os cookies gravados pelo seu domínio, ou seja, uma aplicação só
			pode acessar os cookies gravados por ela.
		</p>

        <hr />

		<h3>Como é composto um cookie?</h3>

		<h4>Um cookie é composto por:</h4>

		<ul>
			<li>Nome</li>
			<li>Valor</li>
			<li>Tempo (tempo de validade do cookie)</li>
		</ul>

		<p>Podemos manipular os cookies em JavaScript através do comando:</p>
        <p><i>document.cookie</i></p>

		<h4>Um cookie é composto basicamente por:</h4>

        <p><i>NAME = Valor; EXPIRES = Data; PATH = Caminho; DOMAIN = Nome_Dominio.</i></p>

		<p><b>NAME:</b> é uma string de caracteres usada para identificar o cookie.</p>

		<p>
			<b>EXPIRES:</b> é a data em que o cookie deve ser removido do arquivo de cookies se ele ainda
			estiver lá. Não sendo especificada nenhuma data, o cookie terá sua validade vencida assim que
			o usuário sair do browser e encerrar a sessão.
		</p>

		<p>
			<b>PATH:</b> é o nome do caminho ou URL do documento que criou o cookie (motivo privacidade)
		</p>

		<p>
			<b>DOMAIN:</b> é o nome completo do domínio do servidor (ou computador central) que
			criou o cookie.
		</p>

	</div>

	<div class="DivClass">
		
		<h2>Cookies com jQuery</h2>

		<p>
			Podemos manipular os cookies facilmente utilizando um plugin para o jQuery
		</p>

		<div class="Exemplo">
			<p>Plugin cookie para o jQuery</p>
			<p><a href="https://github.com/carhartl/jquery-cookie">https://github.com/carhartl/jquery-cookie</a></p>
		</div>

		<ul>
			<li>
				para gravar um cookie <br>
				<i>$.cookie(“nomedocookie”, “valor do cookie”);</i>
			</li>

			<li>
				para definir uma prazo de expiração (10 dias no exemplo)<br>
				<i>$.cookie(“nomedocookie”, “valor do cookie”, { expires: 10 });</i>
			</li>

			<li>
				para recuperar os dados do cookie <br>	
				<i>$.cookie(“nomedocookie”)</i>
			</li>

			<li>
				para apagar um cookie <br>
				<i>$.removeCookie(“nomedocookie”, null);</i>
			</li>
		</ul>

		<hr>

		<h3>Vejamos, na prática, a utilização do cookie.</h3>
		
		<div class="CodHtml">
			&lt;!-- Código HTML --><br><br>

			&lt;form id="form1" name="form1" method="post" action=""><br>
				&lt;p><br>
					RGM:<br>
					&lt;input type="text" name="rgm" id="rgm" size="10"><br>
				&lt;/p><br>
				&lt;p><br>
					Nome:<br>
					&lt;input type="text" name="nome" id="nome" size="60"><br>
				&lt;/p><br>
				&lt;p><br>
					Profissão:<br>
					&lt;input type="text" name="profissao" id="profissao" size="60"><br>
				&lt;/p><br>
				&lt;p><br>
					CPF:<br>
					&lt;input type="text" name="cpf" id="cpf" size="20"><br>
				&lt;/p><br>
				&lt;p><br>
					&lt;input type="button" name="button" id="button1" value="Gravar Cookies"><br>
					&lt;input type="button" name="button2" id="button2" value="Carregar Cookies"><br>
					&lt;input type="button" name="button3" id="button3" value="Eliminar Cookies"><br>
				&lt;/p><br>
			&lt;/form><br>

		</div>

		<div class="CodClass">
			//Código Ajax <br><br>

			//Abaixo, funções que são acionadas através do id.<br>
				$(document).ready(function(){<br>
					$("#button1").click(gravarCookie);<br>
					$("#button2").click(carregarCookie);<br>
					$("#button3").click(function(){<br>
						apagarCookie();<br>
					});<br>
				});<br><br>


				// A sintaxe abaixo demonstra os comandos para registrar as informações em cookies.<br>
				function gravarCookie(){<br>
					$.cookie("rgm",$("#rgm").val(),{expires: 5});<br>
					$.cookie("nome",$("#nome").val(),{expires: 5});<br>
					$.cookie("profissao",$("#profissao").val(),{expires: 5});<br>
					$.cookie("cpf",$("#cpf").val(),{expires: 5});<br>
					alert("Dados Gravados!");<br>
					limparCampos();<br>
				}<br><br>


				//A sintaxe abaixo demonstra os comandos para recuperar as informações em cookies e alimentar os elementos html.<br>
				function carregarCookie(){<br>
					if($.cookie("rgm") != null)<br>
					{<br>
						$("#rgm").val($.cookie("rgm"));<br>
						$("#nome").val($.cookie("nome"));<br>
						$("#profissao").val($.cookie("profissao"));<br>
						$("#cpf").val($.cookie("cpf"));<br>
					}<br>
					else<br>
					{<br>
						alert("Nenhum Cookie Encontrado!")<br>
					}<br>
				}<br><br>


				//A sintaxe abaixo demonstra os comandos para deletar as informações dos cookies.<br>
				function apagarCookie(){<br>
					if ($.cookie("rgm") != null) <br>
					{<br>
						$.removeCookie("rgm");<br>
						$.removeCookie("nome");<br>
						$.removeCookie("profissao");<br>
						$.removeCookie("cpf");<br>
					}<br>
					else<br>
					{<br>
						alert("Nenhum Cookie Encontrado!")<br>
					}<br>
				}<br><br>


				//A sintaxe abaixo demonstra os comandos para limpar as informações dos elementos html.<br>
				function limparCampos(){<br>
					$("#rgm").val("");<br>
					$("#nome").val("");<br>
					$("#profissao").val("");<br>
					$("#cpf").val("");<br>
				}<br>
		</div>		

		<div class="Exemplo">
			<p>Abaixo, um formulário contendo alguns campos.</p>
			<hr>
			<form id="form1" name="form1" method="post" action="">
				<p>
					RGM:
					<input type="text" name="rgm" id="rgm" size="10">
				</p>
				<p>
					Nome:
					<input type="text" name="nome" id="nome" size="60">
				</p>
				<p>
					Profissão:
					<input type="text" name="profissao" id="profissao" size="60">
				</p>
				<p>
					CPF:
					<input type="text" name="cpf" id="cpf" size="20">
				</p>
				<p>
					<input type="button" name="button1" id="button1" value="Gravar Cookies">
					<input type="button" name="button2" id="button2" value="Carregar Cookies">
					<input type="button" name="button3" id="button3" value="Eliminar Cookies">
				</p>
			</form>

			<p>//CÓDIGO APOSTILA - NÃO FUNCIONANDO - VERIFICAR</p>
		</div>

	</div>

	<div class="DivClass">
		
		<h2>Web Storage (HTML5)</h2>

		<p>
			Com essa API, o desenvolvimento fica mais fácil e temos algumas vantagens sobre os
			cookies; a mais significativa seria a capacidade de armazenamento, que varia, de acordo com o
			navegador, de 5MB até 10MB (IE).
		</p>

		<p>
			A Web Storage oferece dois tipos de armazenamento: <b>sessionStorage e localStorage.</b>
		</p>

		<h3>sessionStorage</h3>
		<p>
			Disponível apenas para a janela (aba) que criou o dado até que esta seja fechada.
		</p>

		<h3>localStorage</h3>
		<p>
			Compartilhada por todas as janelas (abas) abertas pela aplicação, e os dados só são
			apagados caso sejam deletados pela aplicação ou pelo usuário.
		</p>

		<hr>

		<h3>Como usar (os métodos são os mesmos para o objeto sessionStorage e localStorage):</h3>

		<h4>Para gravar dados:</h4>
		<p><i>setItem(nome, valor)</i></p>
		<p>
			Ex: localStorage.setItem(“nome”,”Maria”);<br>
			Ex: sessionStorage.setItem(“nome”,”Maria”);
		</p>

		<h4>Para recuperar dados gravados:</h4>
		<p><i>getItem(nome)</i></p>
		<p>
			Ex: localStorage.getItem(“nome”)<br>
			Ex: sessionStorage.getItem(“nome”)
		</p>

		<h4>Para apagar dados gravados:</h4>
		<p><i>removeItem(nome)</i></p>
		<p>
			Ex: localStorage.removeItem(“nome”)<br>
			Ex: sessionStorage.removeItem(“nome”)
		</p>

		<h4>Para apagar todos os dados do storage:</h4>
		<p><i>clear()</i></p>
		<p>
			Ex: localStorage.clear()<br>
			Ex: sessionStorage.clear()
		</p>

		<p>
			Vejamos, na prática, a utilização do webstorage. Essas funções podem ser utilizadas no
			mesmo formulário que foi exibido no item de cookie.			
		</p>

		<div class="CodClass">
			//Código Ajax.js<br><br>


			//LOCALSTORAGE <br><br>

			//Abaixo, funções que são acionadas através do id.<br>
			$(document).ready(function(){<br>
				$("#button4").click(gravarDados);<br>
				$("#button5").click(carregarDados);<br>
				$("#button6").click(function(){<br>
					apagarDados();<br>
				});<br>
			});<br><br>

			// A sintaxe abaixo demonstra os comandos para registrar as informações em localStorage.<br>
			function gravarDados(){<br>
				localStorage.setItem("rgm2",$("#rgm2").val());<br>
				localStorage.setItem("nome2",$("#nome2").val());<br>
				localStorage.setItem("profissao2",$("#profissao2").val());<br>
				localStorage.setItem("cpf2",$("#cpf2").val());<br>
				alert("Dados Gravados!");<br>
				limparDados();<br>
			}<br><br>


			//A sintaxe abaixo demonstra os comandos para recuperar as informações em localStorage e alimentar os elementos html.<br>
			function carregarDados(){<br>
				if(localStorage.length > 0)<br>
				{<br>
					$("#rgm2").val(localStorage.getItem("rgm2"));<br>
					$("#nome2").val(localStorage.getItem("nome2"));<br>
					$("#profissao2").val(localStorage.getItem("profissao2"));<br>
					$("#cpf2").val(localStorage.getItem("cpf2"));<br>
				}<br>
				else<br>
				{<br>
					alert("Nenhum Cookie Encontrado!")<br>
				}<br>
			}<br><br>


			//A sintaxe abaixo demonstra os comandos para deletar as informações dos localStorage.<br>
			function apagarDados(){<br>
				if (localStorage.length > 0) <br>
				{<br>
					localStorage.clear();<br>
				}<br>
				else<br>
				{<br>
					alert("Nenhum Cookie Encontrado!")<br>
				}<br>
				limparCampos();<br>
			}<br><br>


			//A sintaxe abaixo demonstra os comandos para limpar as informações dos elementos html.<br>
			function limparDados(){<br>
				$("#rgm2").val("");<br>
				$("#nome2").val("");<br>
				$("#profissao2").val("");<br>
				$("#cpf2").val("");<br>
			}<br>


		</div>

		<div class="Exemplo">
			<p>Abaixo, um formulário contendo alguns campos.</p>
			<hr>
			<form id="form2" name="form2" method="post" action="">
				<p>
					RGM:
					<input type="text" name="rgm2" id="rgm2" size="10">
				</p>
				<p>
					Nome:
					<input type="text" name="nome2" id="nome2" size="60">
				</p>
				<p>
					Profissão:
					<input type="text" name="profissao2" id="profissao2" size="60">
				</p>
				<p>
					CPF:
					<input type="text" name="cpf2" id="cpf2" size="20">
				</p>
				<p>
					<input type="button" name="button4" id="button4" value="Gravar Cookies">
					<input type="button" name="button5" id="button5" value="Carregar Cookies">
					<input type="button" name="button6" id="button6" value="Eliminar Cookies">
				</p>
			</form>
		</div>

	</div>

	<script type="text/javascript" src="Ajax.js"></script>
</body>
</html>